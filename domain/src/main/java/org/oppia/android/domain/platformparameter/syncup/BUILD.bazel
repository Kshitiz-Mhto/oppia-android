"""
Domain services & definitions corresponding to syncing platform parameters with Oppia web's remote
App Engine endpoints.
"""

load("//defs:oppia_android_library.bzl", "oppia_android_library")

oppia_android_library(
    name = "platform_parameter_sync_up_worker",
    srcs = [
        "PlatformParameterSyncUpWorker.kt",
    ],
    visibility = [
        "//:oppia_testing_visibility",
    ],
    deps = [
        "//:dagger",
        "//data/src/main/java/org/oppia/android/data/backends/gae/api",
        "//domain/src/main/java/org/oppia/android/domain/oppialogger:oppia_logger",
        "//domain/src/main/java/org/oppia/android/domain/oppialogger/exceptions:controller",
        "//domain/src/main/java/org/oppia/android/domain/platformparameter:platform_parameter_controller",
        "//domain/src/main/java/org/oppia/android/domain/util:extensions",
        "//model/src/main/proto:platform_parameter_java_proto_lite",
        "//third_party:androidx_work_work-runtime",
        "//third_party:com_google_guava_guava",
        "//third_party:com_squareup_retrofit2_retrofit",
        "//third_party:javax_inject_javax_inject",
        "//third_party:kotlinx-coroutines-core-jvm",
        "//third_party:org_jetbrains_kotlinx_kotlinx-coroutines-guava",
        "//utility/src/main/java/org/oppia/android/util/data:async_result",
        "//utility/src/main/java/org/oppia/android/util/data:data_provider",
        "//utility/src/main/java/org/oppia/android/util/extensions:context_extensions",
        "//utility/src/main/java/org/oppia/android/util/threading:annotations",
    ],
)

oppia_android_library(
    name = "platform_parameter_sync_up_worker_factory",
    srcs = [
        "PlatformParameterSyncUpWorkerFactory.kt",
    ],
    visibility = [
        "//:oppia_testing_visibility",
        "//domain/src/main/java/org/oppia/android/domain/workmanager:__pkg__",
    ],
    deps = [
        ":platform_parameter_sync_up_worker",
        "//:dagger",
        "//third_party:androidx_annotation_annotation",
        "//third_party:androidx_work_work-runtime",
        "//third_party:com_google_guava_guava",
        "//third_party:javax_inject_javax_inject",
        "//third_party:kotlinx-coroutines-core-jvm",
    ],
)

oppia_android_library(
    name = "prod_module",
    srcs = [
        "PlatformParameterSyncUpWorkerModule.kt",
    ],
    visibility = ["//:oppia_prod_module_visibility"],
    deps = [
        ":platform_parameter_sync_up_work_manager_initializer",
        "//:dagger",
        "//domain/src/main/java/org/oppia/android/domain/oppialogger/analytics:analytics_startup_listener",
        "//third_party:kotlinx-coroutines-core-jvm",
    ],
)

oppia_android_library(
    name = "platform_parameter_sync_up_work_manager_initializer",
    srcs = [
        "PlatformParameterSyncUpWorkManagerInitializer.kt",
    ],
    visibility = [
        "//:oppia_testing_visibility",
    ],
    deps = [
        ":platform_parameter_sync_up_worker",
        "//:dagger",
        "//domain/src/main/java/org/oppia/android/domain/oppialogger/analytics:analytics_startup_listener",
        "//third_party:androidx_annotation_annotation",
        "//third_party:androidx_work_work-runtime",
        "//third_party:javax_inject_javax_inject",
        "//third_party:kotlinx-coroutines-core-jvm",
        "//utility/src/main/java/org/oppia/android/util/platformparameter",
    ],
)
