"""
This package contains all third-party dependencies that script builds depend on.

Note to developers: all new dependencies should go in one of versions/direct_http_versions.bzl or
versions/direct_maven_versions.bzl, not here.

Furthermore, annotation processor plugins must be configured within this file by loading the tool's
corresponding setup macro.
"""

load("//scripts/third_party/versions:direct_http_versions.bzl", "DIRECT_REMOTE_DEPENDENCIES")
load("//scripts/third_party/versions:maven_config.bzl", "MAVEN_ARTIFACT_CONFIGURATION")
load(
    "//third_party/macros:direct_dep_loader.bzl",
    "create_direct_import_dependency_wrappers",
    "create_maven_dependency_wrappers",
)
load("//third_party/tools/moshi:plugin_setup.bzl", set_up_moshi_plugin = "set_up")

package_group(
    name = "script_all_artifact_visibility",
    includes = [
        ":script_test_artifact_visibility",
        "//:oppia_binary_visibility",
        "//scripts:oppia_script_library_visibility",
    ],
)

package_group(
    name = "script_test_artifact_visibility",
    includes = [
        "//scripts:oppia_script_test_visibility",
        "//scripts:oppia_script_testing_library_visibility",
    ],
)

create_maven_dependency_wrappers(
    maven_artifact_config = MAVEN_ARTIFACT_CONFIGURATION,
    maven_repository_name = "maven_scripts",
    prod_artifact_visibility = [":script_all_artifact_visibility"],
    test_artifact_visibility = [":script_test_artifact_visibility"],
)

create_direct_import_dependency_wrappers(
    dependency_imports_details = DIRECT_REMOTE_DEPENDENCIES,
    maven_artifact_visibility = ["@maven_scripts//:__pkg__"],
    prod_artifact_visibility = [":script_all_artifact_visibility"],
    test_artifact_visibility = [":script_test_artifact_visibility"],
)

set_up_moshi_plugin(
    name = "moshi",
    moshi_compiler_dep = "//scripts/third_party:com_squareup_moshi_moshi-kotlin-codegen",
    moshi_exported_library = "//scripts/third_party:com_squareup_moshi_moshi",
    visibility = [":script_all_artifact_visibility"],
)
