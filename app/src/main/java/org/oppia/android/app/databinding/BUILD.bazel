load("//defs:generate_android_manifest.bzl", "generate_android_manifest")

_DATABINDING_PACKAGE = "org.oppia.android"

genrule(
    name = "_generate_data_binder_mapper_impl",
    srcs = [],
    outs = ["DataBinderMapperImpl.java"],
    cmd = """
    echo "package androidx.databinding;" > \"$@\"
    echo "public final class DataBinderMapperImpl extends MergedDataBinderMapper {" >> \"$@\"
    echo "  DataBinderMapperImpl() { addMapper(new %s.DataBinderMapperImpl()); }" >> \"$@\"
    echo "}" >> \"$@\"
    """ % _DATABINDING_PACKAGE,
)

# TODO(#1639): Translate binding adapters back to Kotlin post-Bazel modularization.
android_library(
    name = "databinding_resources",
    srcs = [
        "AppCompatCheckBoxBindingAdapters.java",
        "CircularProgressIndicatorAdapters.java",
        "ConstraintLayoutAdapters.java",
        "DataBinderMapperImpl.java",
        "DrawableBindingAdapters.java",
        "EditTextBindingAdapters.java",
        "GuidelineBindingAdapters.java",
        "ImageViewBindingAdapters.java",
        "MarginBindingAdapters.java",
        "RecyclerViewBindingAdapter.java",
        "StateAssemblerMarginBindingAdapters.java",
        "StateAssemblerPaddingBindingAdapters.java",
        "TextInputLayoutBindingAdapters.java",
        "TextViewBindingAdapters.java",
        "ViewBindingAdapters.java",
    ],
    custom_package = _DATABINDING_PACKAGE,
    enable_data_binding = True,
    exports_manifest = False,
    manifest = generate_android_manifest(
        name = "databinding_resources",
        min_sdk_version = 19,
        package = _DATABINDING_PACKAGE,
        target_sdk_version = 31,
    ),
    resource_files = ["//app:databinding_layouts"],
    visibility = [
        "//:oppia_binary_visibility",
        "//app:app_visibility",
        "//instrumentation:__pkg__",
    ],
    deps = [
        "//app:resources",
        "//app:view_models",
        "//app:views",
        "//app/src/main/java/org/oppia/android/app/administratorcontrols:load_app_version_listener",
        "//app/src/main/java/org/oppia/android/app/administratorcontrols:load_learner_analytics_listener",
        "//app/src/main/java/org/oppia/android/app/administratorcontrols:load_profile_edit_listener",
        "//app/src/main/java/org/oppia/android/app/administratorcontrols:load_profile_list_listener",
        "//app/src/main/java/org/oppia/android/app/administratorcontrols:profile_edit_deletion_dialog_listener",
        "//app/src/main/java/org/oppia/android/app/administratorcontrols:route_to_app_version_listener",
        "//app/src/main/java/org/oppia/android/app/administratorcontrols:route_to_learner_analytics_listener",
        "//app/src/main/java/org/oppia/android/app/administratorcontrols:route_to_profile_list_listener",
        "//app/src/main/java/org/oppia/android/app/administratorcontrols:show_logout_dialog_listener",
        "//app/src/main/java/org/oppia/android/app/devoptions:force_crash_button_click_listener",
        "//app/src/main/java/org/oppia/android/app/devoptions:route_to_force_network_type_listener",
        "//app/src/main/java/org/oppia/android/app/devoptions:route_to_mark_chapters_completed_listener",
        "//app/src/main/java/org/oppia/android/app/devoptions:route_to_mark_stories_completed_listener",
        "//app/src/main/java/org/oppia/android/app/devoptions:route_to_mark_topics_completed_listener",
        "//app/src/main/java/org/oppia/android/app/devoptions:route_to_math_expression_parser_test_listener",
        "//app/src/main/java/org/oppia/android/app/devoptions:route_to_view_event_logs_listener",
        "//app/src/main/java/org/oppia/android/app/drawer:route_to_profile_progress_listener",
        "//app/src/main/java/org/oppia/android/app/help:load_faq_list_fragment_listener",
        "//app/src/main/java/org/oppia/android/app/help:load_license_list_fragment_listener",
        "//app/src/main/java/org/oppia/android/app/help:load_license_text_viewer_fragment_listener",
        "//app/src/main/java/org/oppia/android/app/help:load_policies_fragment_listener",
        "//app/src/main/java/org/oppia/android/app/help:load_third_party_dependency_list_fragment_listener",
        "//app/src/main/java/org/oppia/android/app/help:route_to_faq_list_listener",
        "//app/src/main/java/org/oppia/android/app/help:route_to_third_party_dependency_list_listener",
        "//app/src/main/java/org/oppia/android/app/help/faq:route_to_faq_single_listener",
        "//app/src/main/java/org/oppia/android/app/help/thirdparty:route_to_license_list_listener",
        "//app/src/main/java/org/oppia/android/app/help/thirdparty:route_to_license_text_listener",
        "//app/src/main/java/org/oppia/android/app/hintsandsolution:expanded_hint_list_index_listener",
        "//app/src/main/java/org/oppia/android/app/hintsandsolution:hints_and_solution_listener",
        "//app/src/main/java/org/oppia/android/app/hintsandsolution:reveal_hint_listener",
        "//app/src/main/java/org/oppia/android/app/home:route_to_exploration_listener",
        "//app/src/main/java/org/oppia/android/app/home:route_to_recently_played_listener",
        "//app/src/main/java/org/oppia/android/app/home:route_to_topic_listener",
        "//app/src/main/java/org/oppia/android/app/home:route_to_topic_play_story_listener",
        "//app/src/main/java/org/oppia/android/app/home/recentlyplayed:promoted_story_click_listener",
        "//app/src/main/java/org/oppia/android/app/home/topiclist:topic_summary_click_listener",
        "//app/src/main/java/org/oppia/android/app/notice:beta_notice_closed_listener",
        "//app/src/main/java/org/oppia/android/app/notice:deprecation_notice_exit_app_listener",
        "//app/src/main/java/org/oppia/android/app/notice:general_availability_upgrade_notice_closed_listener",
        "//app/src/main/java/org/oppia/android/app/onboarding:onboarding_navigation_listener",
        "//app/src/main/java/org/oppia/android/app/onboarding:route_to_profile_list_listener",
        "//app/src/main/java/org/oppia/android/app/options:app_language_radio_button_listener",
        "//app/src/main/java/org/oppia/android/app/options:app_language_selection_listener",
        "//app/src/main/java/org/oppia/android/app/options:audio_language_radio_button_listener",
        "//app/src/main/java/org/oppia/android/app/options:audio_language_selected_listener",
        "//app/src/main/java/org/oppia/android/app/options:load_app_language_list_listener",
        "//app/src/main/java/org/oppia/android/app/options:load_audio_language_list_listener",
        "//app/src/main/java/org/oppia/android/app/options:load_reading_text_size_listener",
        "//app/src/main/java/org/oppia/android/app/options:route_to_app_language_list_listener",
        "//app/src/main/java/org/oppia/android/app/options:route_to_audio_language_list_listener",
        "//app/src/main/java/org/oppia/android/app/options:route_to_reading_text_size_listener",
        "//app/src/main/java/org/oppia/android/app/options:text_size_radio_button_listener",
        "//app/src/main/java/org/oppia/android/app/options:text_size_selected_listener",
        "//app/src/main/java/org/oppia/android/app/player/audio:audio_button_listener",
        "//app/src/main/java/org/oppia/android/app/player/audio:audio_language_interaction_listener",
        "//app/src/main/java/org/oppia/android/app/player/exploration:bottom_sheet_options_menu_item_click_listener",
        "//app/src/main/java/org/oppia/android/app/player/exploration:default_font_size_state_listener",
        "//app/src/main/java/org/oppia/android/app/player/exploration:hints_and_solution_exploration_manager_listener",
        "//app/src/main/java/org/oppia/android/app/player/exploration:request_voice_over_icon_spotlight_listener",
        "//app/src/main/java/org/oppia/android/app/player/state/itemviewmodel:split_screen_interaction_ids",
        "//app/src/main/java/org/oppia/android/app/player/state/listener:continue_navigation_button_listener",
        "//app/src/main/java/org/oppia/android/app/player/state/listener:next_navigation_button_listener",
        "//app/src/main/java/org/oppia/android/app/player/state/listener:previous_navigation_button_listener",
        "//app/src/main/java/org/oppia/android/app/player/state/listener:previous_responses_header_click_listener",
        "//app/src/main/java/org/oppia/android/app/player/state/listener:replay_button_listener",
        "//app/src/main/java/org/oppia/android/app/player/state/listener:return_to_topic_navigation_button_listener",
        "//app/src/main/java/org/oppia/android/app/player/state/listener:route_to_hints_and_solution_listener",
        "//app/src/main/java/org/oppia/android/app/player/state/listener:show_hint_availability_listener",
        "//app/src/main/java/org/oppia/android/app/player/state/listener:state_keyboard_button_listener",
        "//app/src/main/java/org/oppia/android/app/player/state/listener:submit_navigation_button_listener",
        "//app/src/main/java/org/oppia/android/app/player/stopplaying:restart_playing_session_listener",
        "//app/src/main/java/org/oppia/android/app/player/stopplaying:stop_state_playing_session_listener",
        "//app/src/main/java/org/oppia/android/app/player/stopplaying:stop_state_playing_session_with_saved_progress_listener",
        "//app/src/main/java/org/oppia/android/app/policies:route_to_policies_listener",
        "//app/src/main/java/org/oppia/android/app/profile:route_to_admin_pin_listener",
        "//app/src/main/java/org/oppia/android/app/profileprogress:profile_picture_click_listener",
        "//app/src/main/java/org/oppia/android/app/profileprogress:route_to_completed_story_list_listener",
        "//app/src/main/java/org/oppia/android/app/profileprogress:route_to_ongoing_topic_list_listener",
        "//app/src/main/java/org/oppia/android/app/recyclerview:bindable_adapter",
        "//app/src/main/java/org/oppia/android/app/recyclerview:divider_item_decorator",
        "//app/src/main/java/org/oppia/android/app/recyclerview:on_drag_ended_listener",
        "//app/src/main/java/org/oppia/android/app/recyclerview:on_item_drag_listener",
        "//app/src/main/java/org/oppia/android/app/settings/profile:load_profile_edit_deletion_dialog_listener",
        "//app/src/main/java/org/oppia/android/app/settings/profile:route_to_profile_edit_listener",
        "//app/src/main/java/org/oppia/android/app/spotlight",
        "//app/src/main/java/org/oppia/android/app/story:exploration_selection_listener",
        "//app/src/main/java/org/oppia/android/app/testing:bindable_adapter_test_data_model",
        "//app/src/main/java/org/oppia/android/app/topic:route_to_concept_card_listener",
        "//app/src/main/java/org/oppia/android/app/topic:route_to_question_player_listener",
        "//app/src/main/java/org/oppia/android/app/topic:route_to_resume_lesson_listener",
        "//app/src/main/java/org/oppia/android/app/topic:route_to_revision_card_listener",
        "//app/src/main/java/org/oppia/android/app/topic:route_to_story_listener",
        "//app/src/main/java/org/oppia/android/app/topic/conceptcard:concept_card_listener",
        "//app/src/main/java/org/oppia/android/app/topic/lessons:chapter_summary_selection_listener",
        "//app/src/main/java/org/oppia/android/app/topic/lessons:expanded_chapter_list_index_listener",
        "//app/src/main/java/org/oppia/android/app/topic/lessons:story_summary_selection_listener",
        "//app/src/main/java/org/oppia/android/app/topic/questionplayer:hints_and_solution_question_manager_listener",
        "//app/src/main/java/org/oppia/android/app/topic/revision:revision_subtopic_selection_listener",
        "//app/src/main/java/org/oppia/android/app/topic/revisioncard:return_to_topic_click_listener",
        "//app/src/main/java/org/oppia/android/app/translation:app_language_activity_injector_provider",
        "//app/src/main/java/org/oppia/android/app/translation:app_language_resource_handler",
        "//app/src/main/java/org/oppia/android/app/utility:keyboard_helper",
        "//app/src/main/java/org/oppia/android/app/utility:on_clickable_area_clicked_listener",
        "//app/src/main/java/org/oppia/android/app/utility:region_click_event",
        "//app/src/main/java/org/oppia/android/app/walkthrough:walkthrough_activity_listener",
        "//app/src/main/java/org/oppia/android/app/walkthrough:walkthrough_fragment_change_listener",
        "//app/src/main/java/org/oppia/android/app/walkthrough:walkthrough_next_page_navigation_listener",
        "//app/src/main/java/org/oppia/android/app/walkthrough/end:walkthrough_back_navigation_listener",
        "//app/src/main/java/org/oppia/android/app/walkthrough/end:walkthrough_final_listener",
        "//model/src/main/proto:event_logger_java_proto_lite",
        "//model/src/main/proto:interaction_object_java_proto_lite",
        "//model/src/main/proto:profile_java_proto_lite",
        "//model/src/main/proto:thumbnail_java_proto_lite",
        "//model/src/main/proto:topic_java_proto_lite",
        "//model/src/main/proto:translation_java_proto_lite",
        "//model/src/main/proto:version_java_proto_lite",
        "//third_party:androidx_annotation_annotation",
        "//third_party:androidx_appcompat_appcompat",
        "//third_party:androidx_constraintlayout_constraintlayout",
        "//third_party:androidx_core_core",
        "//third_party:androidx_databinding_databinding-adapters",
        "//third_party:androidx_databinding_databinding-common",
        "//third_party:androidx_databinding_databinding-runtime",
        "//third_party:androidx_drawerlayout_drawerlayout",
        "//third_party:androidx_lifecycle_lifecycle-livedata-core",
        "//third_party:androidx_lifecycle_lifecycle-livedata-ktx",
        "//third_party:androidx_recyclerview_recyclerview",
        "//third_party:androidx_viewpager2_viewpager2",
        "//third_party:androidx_viewpager_viewpager",
        "//third_party:circularimageview_circular_image_view",
        "//third_party:com_github_bumptech_glide_glide",
        "//third_party:com_google_android_flexbox_flexbox",
        "//third_party:com_google_android_material_material",
        "//third_party:de_hdodenhof_circleimageview",
        "//third_party:javax_annotation_javax_annotation-api",
        "//third_party:nl_dionsegijn_konfetti",
        "//utility/src/main/java/org/oppia/android/util/logging:sync_status_manager",
        "//utility/src/main/java/org/oppia/android/util/system:oppia_clock",
        "//utility/src/main/java/org/oppia/android/util/system:oppia_clock_injector_provider",
    ],
)
